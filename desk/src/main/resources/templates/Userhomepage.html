<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Homepage</title>
    <style>
        /* General Styles */
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            display: flex;
            width: 100%;
        }

        .sidebar {
            width: 20%;
            background: #333;
            color: white;
            display: flex;
            flex-direction: column;
        }

        .sidebar nav ul {
            list-style: none;
            padding: 0;
        }

        .sidebar nav ul li {
            margin: 15px 0;
        }

        .sidebar nav ul li a {
            color: white;
            text-decoration: none;
            padding: 10px 15px;
            display: block;
        }

        .sidebar nav ul li a:hover {
            background: #444;
            border-radius: 4px;
        }

        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input, select, button {
            width: 100%;
            padding: 8px;
            font-size: 16px;
        }

        button {
            cursor: pointer;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
        }

        button:hover {
            background-color: #218838;
        }

        #calendar-container {
            margin-top: 20px;
        }

        .calendar-week {
            margin-bottom: 15px;
        }

        .calendar-day {
            display: inline-block;
            margin: 5px;
            padding: 10px;
            background: #f1f1f1;
            border-radius: 4px;
            cursor: pointer;
            text-align: center;
        }

        .calendar-day.selected {
            background-color: #007bff;
            color: white;
        }

        .calendar-day.weekend {
            background-color: #d6d6d6;
            pointer-events: none;
        }

        .summary {
            margin-top: 20px;
        }

        .summary ul {
            list-style: none;
            padding: 0;
        }

        .summary ul li {
            margin-bottom: 10px;
        }
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const monthSelect = document.getElementById("month");
            const bookingTypeSelect = document.getElementById("booking-type");
            const calendarContainer = document.getElementById("calendar-container");
            const summaryList = document.getElementById("selected-dates");
            const summarySection = document.getElementById("summary");

            let selectedDates = [];
            
            // Helper to generate weeks dynamically
            function generateWeeks(month) {
                const weeks = [];
                const daysInMonth = new Date(new Date().getFullYear(), month, 0).getDate();
                for (let i = 1; i <= daysInMonth; i += 7) {
                    const week = [];
                    for (let j = i; j < i + 7 && j <= daysInMonth; j++) {
                        week.push(j);
                    }
                    weeks.push(week);
                }
                return weeks;
            }

            // Render calendar
            function renderCalendar(monthIndex) {
                calendarContainer.innerHTML = ""; // Clear previous calendar
                const weeks = generateWeeks(monthIndex + 1); // Generate weeks for the selected month
                weeks.forEach((week, weekIndex) => {
                    const weekDiv = document.createElement("div");
                    weekDiv.classList.add("calendar-week");
                    weekDiv.innerHTML = `<strong>Week ${weekIndex + 1}:</strong>`;
                    week.forEach(day => {
                        const dayDiv = document.createElement("div");
                        dayDiv.classList.add("calendar-day");
                        const isWeekend = new Date(new Date().getFullYear(), monthIndex, day).getDay() === 0 || 
                                          new Date(new Date().getFullYear(), monthIndex, day).getDay() === 6;
                        if (isWeekend) {
                            dayDiv.classList.add("weekend");
                        }
                        dayDiv.textContent = day;
                        dayDiv.addEventListener("click", () => {
                            if (!isWeekend) {
                                toggleDateSelection(day, dayDiv);
                            }
                        });
                        weekDiv.appendChild(dayDiv);
                    });
                    calendarContainer.appendChild(weekDiv);
                });
            }

            // Toggle date selection
            function toggleDateSelection(day, dayElement) {
                const dateIndex = selectedDates.indexOf(day);
                if (dateIndex === -1) {
                    selectedDates.push(day);
                    dayElement.classList.add("selected");
                } else {
                    selectedDates.splice(dateIndex, 1);
                    dayElement.classList.remove("selected");
                }
                renderSummary();
            }

            // Render summary of selected dates
            function renderSummary() {
                summaryList.innerHTML = selectedDates
                    .sort((a, b) => a - b)
                    .map(date => `<li>Day ${date}</li>`)
                    .join("");
            }

            // Handle form changes
            monthSelect.addEventListener("change", (e) => {
                const monthIndex = parseInt(e.target.value, 10);
                if (!isNaN(monthIndex)) {
                    renderCalendar(monthIndex);
                    selectedDates = [];
                    renderSummary();
                }
            });

            bookingTypeSelect.addEventListener("change", (e) => {
                // Additional logic can be implemented here for Regular/Irregular
            });
        });
    </script>
</head>

<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <nav>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Booking History</a></li>
                    <li><a href="#">Logout</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <h1>Book Your Seat</h1>
            <form id="booking-form">
                <!-- Employee ID -->
                <div class="form-group">
                    <label for="employee-id">Employee ID:</label>
                    <input type="number" id="employee-id" minlength="7" maxlength="7" required>
                </div>

                <!-- Month Selection -->
                <div class="form-group">
                    <label for="month">Select Month:</label>
                    <select id="month" required>
                        <option value="">--Select Month--</option>
                        <option value="0">January</option>
                        <option value="1">February</option>
                        <option value="2">March</option>
                        <option value="3">April</option>
                        <option value="4">May</option>
                        <option value="5">June</option>
                        <option value="6">July</option>
                        <option value="7">August</option>
                        <option value="8">September</option>
                        <option value="9">October</option>
                        <option value="10">November</option>
                        <option value="11">December</option>
                    </select>
                </div>

                <!-- Booking Type -->
                <div class="form-group">
                    <label for="booking-type">Booking Type:</label>
                    <select id="booking-type" required>
                        <option value="">--Select Type--</option>
                        <option value="regular">Regular</option>
                        <option value="irregular">Irregular</option>
                    </select>
                </div>

                <!-- Calendar -->
                <div id="calendar-container">
                    <p>Select a month and booking type to see available dates.</p>
                </div>

                <!-- Summary -->
                <div id="summary" class="summary">
                    <h2>Selected Dates</h2>
                    <ul id="selected-dates"></ul>
                </div>

                <!-- Save Button -->
                <button type="submit">Save</button>
            </form>
        </main>
    </div>
</body>

</html>
